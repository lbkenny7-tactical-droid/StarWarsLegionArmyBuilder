<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CIS</title>
  <link rel="stylesheet" href="CISStyle.css">
</head>
<body>
  <header>
    <h1>CIS</h1>
    <nav>
      <ul>
        <li><a href="WelcomePage.html">Welcome</a></li>
        <li><a href="CIS.html">CIS</a></li>
      </ul>
    </nav>
  </header>
  
  <main>
    <div class="columns">
      <!-- Column for dynamically created buttons -->
      <div class="column">
        <p class="subheaders">Commanders</p>
        <div id="button-container"></div> <!-- Container for buttons -->
      </div>
      <div class="column">
        <p class="subheaders">Cards</p>
        <div id="unit-card-display"></div>
      </div>
      <div class="column">
        <p class="subheaders">Current Selection</p>
        <div id="added-units"></div>
      </div>
    </div>
  </main>
      
  

  <footer>
    <p>Created by You</p>
  </footer>

  <script>
    // Fetch data from the backend
    fetch('http://localhost:3000/api/data')
      .then(response => response.json())
      .then(data => {
        // Select the container where the buttons will be placed
        const buttonContainer = document.getElementById('button-container');  // Using ID selector for clarity
        
        // Clear the existing buttons (if any)
        buttonContainer.innerHTML = '';

        // Loop through the data and generate the buttons dynamically
        data.forEach(unit => {
          // Create the button container
          const unitButtonContainer = document.createElement('div');
          unitButtonContainer.classList.add('button-container');

          // Create the commander button
          const commanderButton = document.createElement('button');
          commanderButton.classList.add('button', 'commander-button');
          commanderButton.setAttribute('data-image', `${unit.unitcard_image}`);  // Ensure 'unitcard_image' field exists

          // Add text to the button
          const buttonText = document.createElement('span');
          buttonText.classList.add('button-text');
          buttonText.textContent = unit.name;  // Ensure 'name' field exists
          commanderButton.appendChild(buttonText);

          // Add image to the button
          const buttonImage = document.createElement('img');
          buttonImage.src = `${unit.toy_image}`;  // Ensure 'toy_image' field exists
          buttonImage.alt = unit.name;
          buttonImage.classList.add('button-image');
          commanderButton.appendChild(buttonImage);

          // Create the add button (+)
          const addButton = document.createElement('button');
          addButton.classList.add('button', 'circle-button');
          addButton.id = `add-${unit.id}`;  // Ensure 'id' is unique and exists
          addButton.textContent = '+';

          // Append buttons to the container
          unitButtonContainer.appendChild(commanderButton);
          unitButtonContainer.appendChild(addButton);

          // Add the unit button container to the parent container
          buttonContainer.appendChild(unitButtonContainer);

          // Add event listener to the commander button
          commanderButton.addEventListener('click', () => {
            // Get the unitcard image from the button's data attribute
            const unitCardImage = commanderButton.getAttribute('data-image');

            // Select the cards display container
            const unitCardDisplay = document.getElementById('unit-card-display');

            // Create an image element to display in the "Cards" column
            const unitImage = document.createElement('img');
            unitImage.src = unitCardImage;
            unitImage.alt = unit.name;
            unitImage.classList.add('unit-card-image');  // Add a class for styling if needed

            // Clear the "Cards" column and add the new image
            unitCardDisplay.innerHTML = '';  // Clear any existing content
            unitCardDisplay.appendChild(unitImage);
          });
        });
      })
      .catch(error => {
        console.error('Error fetching data:', error);
      });
  </script>

  <script src="CISScript.js"></script>
</body>
</html>
